### Выбор паттерна имплементации бизнес-логики.

 Поддомен имеет дело с денежными транзакциями, логами, ивентами и другими действиями во времени, нужно прослеживании истории - [[тактические паттерны#Event-sourced domain model]]
 
 Сложная бизнес логика - [[тактические паттерны#Domain model]]
 
 Сложные структуры данных - [[тактические паттерны#Active record]]
 
 иначе - [[тактические паттерны#Transaction script]]
 
 
Также выбор может базироваться на том, на сколько сложен ubiquitous language поддомена. Или же мы имеем простые CRUD-операции. 

Core поддомен может использовать любой паттерн, core поддомен не обязывается быть технически сложным в исполнении (но чот хз).

### Bounded context
Границы контекстов должны выбираться так, чтобы включать в себя все нужное, со временем будет понятно что стоит выделить в отдельный.

Гораздо легче разделять контексты, чем мержить два или более.

### Выбор стратегии тестирования
![[пирамиды тестирования.png]]

Классическая пирамида тестирования лучше подходит для [[тактические паттерны#Domain model]] и [[тактические паттерны#Event-sourced domain model]]. Юнит тесты для VO и Entities могут покрыть всю бизнес-лоогику.

Используя [[тактические паттерны#Active record]] лучше выбрать testing diamond, так как логика размыта по сервисам и структурам данных.

 Так как в [[тактические паттерны#Transaction script]] не много логики, а в основном crud-операции, то легче тестировать используя end2end - reversed testing pyramid.
 
 ### Conclusion
 ![[выбор паттернов.png]]
 